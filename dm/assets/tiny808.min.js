(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var INSTS={kick:{lib:require("kick-eight"),gain:1},snare:{lib:require("snare"),gain:.2},"rim-shot":{lib:require("rim-shot")},"hi-hat":{lib:require("hi-hat")},"tom-tom":{lib:require("tom-tom")},clappy:{lib:require("clappy"),gain:.3},maracas:{lib:require("maracas")},"cow-bell":{lib:require("cow-bell"),gain:.5}};function createInstruments(ac,output){return Object.keys(INSTS).reduce(function(inst,name){var src=INSTS[name];var dest={factory:src.lib(ac),gain:src.gain||.7};dest.out=ac.createGain();dest.out.connect(output);dest.out.gain.value=dest.gain;inst[name]=dest;return inst},{})}function tiny808(ac,options){var output=ac.createGain();var insts=createInstruments(ac,output);var dm={ac:ac,out:output,opts:options||{}};dm.names=function(){return Object.keys(insts)};dm.connect=function(dest){output.connect(dest);return dm};dm.gain=function(name,val){var g=insts[name];if(!g)return null;if(arguments.length>1)g.out.gain.value=val;return g.out};dm.node=function(name,opts){var g=insts[name];if(!g)return null;var node=g.factory();node.connect(g.out);return node};dm.start=function(name,time,opts){var node=dm.node(name,opts);if(!node)return null;var now=ac.currentTime;node.start(time<now?now:time);return node};return dm}if(typeof module==="object"&&module.exports)module.exports=tiny808;if(typeof window!=="undefined")window.tiny808=tiny808},{clappy:2,"cow-bell":4,"hi-hat":5,"kick-eight":7,maracas:9,"rim-shot":11,snare:13,"tom-tom":17}],2:[function(require,module,exports){var NoiseBuffer=require("noise-buffer");var buffer=NoiseBuffer(1);module.exports=function(context){var duration=1.2;var cycles=3;var clapFrequency=80;var clapLength=cycles/clapFrequency;var bandpass=context.createBiquadFilter();bandpass.type="bandpass";bandpass.frequency.value=800;bandpass.Q.value=.7;var highpass=context.createBiquadFilter();highpass.type="highpass";highpass.frequency.value=600;bandpass.connect(highpass);var playingNodes=[];return function(){var audioNode=context.createGain();var preChoke=context.createGain();preChoke.gain.value=0;var postChoke=context.createGain();postChoke.gain.value=0;preChoke.connect(bandpass);postChoke.connect(audioNode);var noise=context.createBufferSource();noise.buffer=buffer;noise.loop=true;var clapDryEnvelope=context.createGain();clapDryEnvelope.gain.value=0;var clapDecayEnvelope=context.createGain();clapDecayEnvelope.gain.value=0;var lfoCarrier=context.createGain();var lfo=context.createOscillator();lfo.type="sawtooth";lfo.frequency.value=-clapFrequency;lfo.connect(lfoCarrier.gain);noise.connect(clapDryEnvelope);clapDryEnvelope.connect(lfoCarrier);lfoCarrier.connect(preChoke);noise.connect(clapDecayEnvelope);clapDecayEnvelope.connect(preChoke);highpass.connect(postChoke);audioNode.start=function(when){while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(audioNode);preChoke.gain.setValueAtTime(0,when+1e-4);preChoke.gain.linearRampToValueAtTime(1,when+2e-4);postChoke.gain.setValueAtTime(0,when+1e-4);postChoke.gain.linearRampToValueAtTime(1,when+2e-4);clapDryEnvelope.gain.setValueAtTime(1e-4,when);clapDryEnvelope.gain.exponentialRampToValueAtTime(1,when+.001);clapDryEnvelope.gain.linearRampToValueAtTime(1,when+clapLength);clapDryEnvelope.gain.exponentialRampToValueAtTime(1e-9,when+clapLength+.01);clapDryEnvelope.gain.setValueAtTime(0,when+clapLength+.02);clapDecayEnvelope.gain.setValueAtTime(1e-4,when);clapDecayEnvelope.gain.setValueAtTime(1e-4,when+clapLength);clapDecayEnvelope.gain.exponentialRampToValueAtTime(1,when+clapLength+.001);clapDecayEnvelope.gain.exponentialRampToValueAtTime(.2,when+.1);clapDecayEnvelope.gain.exponentialRampToValueAtTime(1e-9,when+duration);clapDecayEnvelope.gain.setValueAtTime(0,when+duration+.01);lfo.start(when);lfo.stop(when+duration);noise.start(when,Math.random()*noise.buffer.duration);noise.stop(when+duration);audioNode.gain.setValueAtTime(0,when+duration);noise.onended=function(){audioNode.disconnect()}};audioNode.stop=function(when){preChoke.gain.setValueAtTime(1,when);preChoke.gain.linearRampToValueAtTime(0,when+1e-4);postChoke.gain.setValueAtTime(1,when);postChoke.gain.linearRampToValueAtTime(0,when+1e-4);try{lfo.stop(when)}catch(e){}try{noise.stop(when)}catch(e){}};return audioNode}}},{"noise-buffer":3}],3:[function(require,module,exports){module.exports=function(length,type){type=type||"white";var sampleRate=44100;var samples=length*sampleRate;var context=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,samples,sampleRate);var noiseBuffer=context.createBuffer(1,samples,sampleRate);var output=noiseBuffer.getChannelData(0);switch(type){case"white":for(var i=0;i<samples;i++){output[i]=Math.random()*2-1}break;case"pink":var b0,b1,b2,b3,b4,b5,b6;b0=b1=b2=b3=b4=b5=b6=0;for(var i=0;i<samples;i++){var white=Math.random()*2-1;b0=.99886*b0+white*.0555179;b1=.99332*b1+white*.0750759;b2=.969*b2+white*.153852;b3=.8665*b3+white*.3104856;b4=.55*b4+white*.5329522;b5=-.7616*b5-white*.016898;output[i]=b0+b1+b2+b3+b4+b5+b6+white*.5362;output[i]*=.11;b6=white*.115926}break;case"brown":var lastOut=0;for(var i=0;i<samples;i++){var white=Math.random()*2-1;output[i]=(lastOut+.02*white)/1.02;lastOut=output[i];output[i]*=3.5}break}return noiseBuffer}},{}],4:[function(require,module,exports){module.exports=function(context){return function(){var duration=1.2;var osc1=context.createOscillator();var osc2=context.createOscillator();osc1.type="square";osc2.type="square";osc1.frequency.value=800;osc2.frequency.value=540;var gainNode=context.createGain();var filter=context.createBiquadFilter();filter.type="bandpass";osc1.connect(gainNode);osc2.connect(gainNode);gainNode.connect(filter);filter.start=function(when){gainNode.gain.setValueAtTime(.2,when);gainNode.gain.exponentialRampToValueAtTime(1e-5,when+duration);osc1.start(when);osc2.start(when);osc1.stop(when+duration);osc2.stop(when+duration);osc1.onended=function(){filter.disconnect()}};return filter}}},{}],5:[function(require,module,exports){var Envelope=require("envelope-generator");module.exports=function(context){var playingNodes=[];var fundamental=80;var ratios=[1,1.5,2.08,2.715,3.395,4.105];return function(open){var highpass=context.createBiquadFilter();highpass.type="highpass";highpass.frequency.value=7e3;var bandpass=context.createBiquadFilter();bandpass.type="bandpass";bandpass.frequency.value=1e4;bandpass.connect(highpass);var audioNode=context.createGain();var preChoke=context.createGain();preChoke.gain.value=0;var postChoke=context.createGain();postChoke.gain.value=0;var volume=context.createGain();volume.gain.value=.4;if(open){audioNode.duration=1.3}else{audioNode.duration=.1}var gainNode=context.createGain();gainNode.gain.value=0;gainNode.connect(bandpass);highpass.connect(postChoke);postChoke.connect(volume);volume.connect(audioNode);var oscs=ratios.map(function(ratio){var osc=context.createOscillator();osc.type="square";osc.frequency.value=fundamental*ratio;osc.connect(preChoke);return osc});preChoke.connect(gainNode);audioNode.start=function(when){while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(audioNode);preChoke.gain.setValueAtTime(0,when+1e-4);preChoke.gain.linearRampToValueAtTime(1,when+2e-4);postChoke.gain.setValueAtTime(0,when+1e-4);postChoke.gain.linearRampToValueAtTime(1,when+2e-4);var envSettings={curve:"exponential",attackTime:1e-4,attackCurve:"linear",sustainLevel:.3,decayTime:.02};envSettings.releaseTime=audioNode.duration-envSettings.attackTime-envSettings.decayTime;var env=new Envelope(context,envSettings);env.connect(gainNode.gain);env.start(when);env.release(when+envSettings.attackTime+envSettings.decayTime);var stopAt=env.getReleaseCompleteTime();env.stop(stopAt);oscs.forEach(function(osc){osc.start(when);osc.stop(stopAt)});oscs[0].onended=function(){highpass.disconnect(postChoke);audioNode.disconnect()}};audioNode.stop=function(when){preChoke.gain.setValueAtTime(1,when);preChoke.gain.linearRampToValueAtTime(0,when+1e-4);postChoke.gain.setValueAtTime(1,when);postChoke.gain.linearRampToValueAtTime(0,when+1e-4);audioNode.gain.setValueAtTime(1,when);audioNode.gain.linearRampToValueAtTime(0,when+1e-4)};return audioNode}}},{"envelope-generator":6}],6:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Envelope=function(){function Envelope(context,settings){_classCallCheck(this,Envelope);this.context=context;this.settings=settings;this._setDefaults();this.source=this._getOnesBufferSource();this.attackDecayNode=context.createGain();this.releaseNode=context.createGain();this.ampNode=context.createGain();this.outputNode=context.createGain();this.outputNode.gain.value=this.settings.startLevel;this.ampNode.gain.value=this.settings.maxLevel-this.settings.startLevel;this.source.connect(this.attackDecayNode);this.source.connect(this.outputNode);this.attackDecayNode.connect(this.releaseNode);this.releaseNode.connect(this.ampNode);this.ampNode.connect(this.outputNode.gain)}_createClass(Envelope,[{key:"_setDefaults",value:function _setDefaults(){if(typeof this.settings.curve!=="string"){this.settings.curve="linear"}if(typeof this.settings.delayTime!=="number"){this.settings.delayTime=0}if(typeof this.settings.startLevel!=="number"){this.settings.startLevel=0}if(typeof this.settings.maxLevel!=="number"){this.settings.maxLevel=1}if(typeof this.settings.sustainLevel!=="number"){this.settings.sustainLevel=1}if(typeof this.settings.attackTime!=="number"){this.settings.attackTime=0}if(typeof this.settings.holdTime!=="number"){this.settings.holdTime=0}if(typeof this.settings.decayTime!=="number"){this.settings.decayTime=0}if(typeof this.settings.releaseTime!=="number"){this.settings.releaseTime=0}if(this.settings.startLevel===0&&this._getRampMethodName("attack")==="exponentialRampToValueAtTime"){if(this.settings.maxLevel<0){this.settings.startLevel=-.001}else{this.settings.startLevel=.001}}if(this.settings.maxLevel===0&&(this._getRampMethodName("attack")==="exponentialRampToValueAtTime"||this._getRampMethodName("decay")==="exponentialRampToValueAtTime"||this._getRampMethodName("release")==="exponentialRampToValueAtTime")){if(this.settings.startLevel<0){this.settings.maxLevel=-.001}else{this.settings.maxLevel=.001}}if(this.settings.sustainLevel===0&&(this._getRampMethodName("decay")==="exponentialRampToValueAtTime"||this._getRampMethodName("release")==="exponentialRampToValueAtTime")){this.settings.sustainLevel=.001}if(this.settings.decayTime===0){this.settings.decayTime=.001}}},{key:"_getOnesBufferSource",value:function _getOnesBufferSource(){var context=this.context;var onesBuffer=context.createBuffer(1,2,context.sampleRate);var data=onesBuffer.getChannelData(0);data[0]=1;data[1]=1;var source=context.createBufferSource();source.buffer=onesBuffer;source.loop=true;return source}},{key:"connect",value:function connect(targetParam){this.outputNode.connect(targetParam)}},{key:"start",value:function start(when){var attackRampMethodName=this._getRampMethodName("attack");var decayRampMethodName=this._getRampMethodName("decay");var attackStartsAt=when+this.settings.delayTime;var attackEndsAt=attackStartsAt+this.settings.attackTime;var decayStartsAt=attackEndsAt+this.settings.holdTime;var decayEndsAt=decayStartsAt+this.settings.decayTime;var attackStartLevel=0;if(attackRampMethodName==="exponentialRampToValueAtTime"){attackStartLevel=.001}this.attackDecayNode.gain.setValueAtTime(attackStartLevel,when);this.attackDecayNode.gain.setValueAtTime(attackStartLevel,attackStartsAt);this.attackDecayNode.gain[attackRampMethodName](1,attackEndsAt);this.attackDecayNode.gain.setValueAtTime(1,decayStartsAt);this.attackDecayNode.gain[decayRampMethodName](this.settings.sustainLevel,decayEndsAt);this.source.start(when)}},{key:"_getRampMethodName",value:function _getRampMethodName(stage){var exponential="exponentialRampToValueAtTime";var linear="linearRampToValueAtTime";var generalRampMethodName=linear;if(this.settings.curve==="exponential"){generalRampMethodName=exponential}switch(stage){case"attack":if(this.settings.attackCurve){if(this.settings.attackCurve==="exponential"){return exponential}else if(this.settings.attackCurve==="linear"){return linear}}break;case"decay":if(this.settings.decayCurve){if(this.settings.decayCurve==="exponential"){return exponential}else if(this.settings.decayCurve==="linear"){return linear}}break;case"release":if(this.settings.releaseCurve){if(this.settings.releaseCurve==="exponential"){return exponential}else if(this.settings.releaseCurve==="linear"){return linear}}break;default:break}return generalRampMethodName}},{key:"release",value:function release(when){this.releasedAt=when;var releaseEndsAt=this.releasedAt+this.settings.releaseTime;var rampMethodName=this._getRampMethodName("release");var releaseTargetLevel=0;if(rampMethodName==="exponentialRampToValueAtTime"){releaseTargetLevel=.001}this.releaseNode.gain.setValueAtTime(1,when);this.releaseNode.gain[rampMethodName](releaseTargetLevel,releaseEndsAt)}},{key:"stop",value:function stop(when){this.source.stop(when)}},{key:"getReleaseCompleteTime",value:function getReleaseCompleteTime(){if(typeof this.releasedAt!=="number"){throw new Error("Release has not been called.")}return this.releasedAt+this.settings.releaseTime}}]);return Envelope}();module.exports=Envelope},{}],7:[function(require,module,exports){var NoiseBuffer=require("noise-buffer");var noiseBuffer=NoiseBuffer(1);module.exports=function(context,parameters){parameters=parameters||{};parameters.tone=typeof parameters.tone==="number"?parameters.tone:64;parameters.decay=typeof parameters.decay==="number"?parameters.decay:64;parameters.level=typeof parameters.level==="number"?parameters.level:100;var playingNodes=[];return function(){var osc=context.createOscillator();osc.frequency.value=54;var gain=context.createGain();var oscGain=context.createGain();osc.connect(oscGain);gain.decay=parameters.decay;gain.tone=parameters.tone;var choke=context.createGain();choke.gain.value=0;oscGain.connect(choke);choke.connect(gain);gain.start=function(when){if(typeof when!=="number"){when=context.currentTime}while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(gain);choke.gain.setValueAtTime(0,when+1e-4);choke.gain.linearRampToValueAtTime(1,when+2e-4);max=2.2;min=.09;duration=(max-min)*(gain.decay/127)+min;var noise=context.createBufferSource();noise.buffer=noiseBuffer;noise.loop=true;var noiseGain=context.createGain();var noiseFilter=context.createBiquadFilter();noiseFilter.type="bandpass";noiseFilter.frequency.value=1380*2;noiseFilter.Q.value=20;noise.connect(noiseFilter);noiseFilter.connect(noiseGain);noiseGain.connect(choke);noiseGain.gain.setValueAtTime(2*Math.max(gain.tone/127,1e-4),when);noiseGain.gain.exponentialRampToValueAtTime(1e-4,when+.01);noise.start(when);noise.stop(when+duration);osc.start(when);osc.stop(when+duration);osc.onended=function(){gain.disconnect()};oscGain.gain.setValueAtTime(1e-4,when);oscGain.gain.exponentialRampToValueAtTime(1,when+.004);oscGain.gain.exponentialRampToValueAtTime(1e-4,when+duration)};gain.stop=function(when){if(typeof when!=="number"){when=context.currentTime}choke.gain.setValueAtTime(1,when);choke.gain.linearRampToValueAtTime(0,when+1e-4)};return gain}}},{"noise-buffer":8}],8:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3}],9:[function(require,module,exports){var NoiseBuffer=require("noise-buffer");module.exports=function(context,frequency){return function(){var duration=.2;var noise=context.createBufferSource();noise.buffer=NoiseBuffer(duration);var filter=context.createBiquadFilter();filter.type="bandpass";filter.frequency.value=16e3;filter.Q.value=.5;var gain=context.createGain();noise.connect(filter);filter.connect(gain);var output=context.createGain();gain.connect(output);output.start=function(when){noise.start(when);gain.gain.setValueAtTime(1e-5,when);gain.gain.exponentialRampToValueAtTime(1,when+duration/7);gain.gain.exponentialRampToValueAtTime(1e-5,when+duration);noise.stop(when+duration);noise.onended=function(){output.disconnect()}};return output}}},{"noise-buffer":10}],10:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3}],11:[function(require,module,exports){var makeDistortionCurve=require("make-distortion-curve");var curve=makeDistortionCurve(1024);module.exports=function(context){var playingNodes=[];return function(){var distortion=context.createWaveShaper();distortion.curve=curve;var highpass=context.createBiquadFilter();highpass.type="highpass";highpass.frequency.value=700;distortion.connect(highpass);var preChoke=context.createGain();preChoke.gain.value=0;var postChoke=context.createGain();postChoke.gain.value=0;var duration=.05;var gain=context.createGain();gain.start=function(when){while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(gain);preChoke.gain.setValueAtTime(0,when+1e-4);preChoke.gain.linearRampToValueAtTime(1,when+2e-4);postChoke.gain.setValueAtTime(0,when+1e-4);postChoke.gain.linearRampToValueAtTime(1,when+2e-4);preChoke.connect(distortion);highpass.connect(postChoke);postChoke.connect(gain);var oscs=[context.createOscillator(),context.createOscillator()];oscs.forEach(function(osc,i){osc.type="triangle";osc.connect(preChoke);osc.start(when);osc.stop(when+duration);switch(i){case 0:osc.frequency.value=500;break;case 1:osc.frequency.value=1720;break}});oscs[0].onended=function(){highpass.disconnect(postChoke)};gain.gain.setValueAtTime(.8,when);gain.gain.exponentialRampToValueAtTime(1e-5,when+duration)};gain.stop=function(when){preChoke.gain.setValueAtTime(1,when);preChoke.gain.linearRampToValueAtTime(0,when+1e-4);postChoke.gain.setValueAtTime(1,when);postChoke.gain.linearRampToValueAtTime(0,when+1e-4)};return gain}}},{"make-distortion-curve":12}],12:[function(require,module,exports){module.exports=function(amount){var k=typeof amount==="number"?amount:50,n_samples=44100,curve=new Float32Array(n_samples),deg=Math.PI/180,i=0,x;for(;i<n_samples;++i){x=i*2/n_samples-1;curve[i]=(3+k)*x*20*deg/(Math.PI+k*Math.abs(x))}return curve}},{}],13:[function(require,module,exports){var NoiseBuffer=require("noise-buffer");var augmentedOnEnded=require("./lib/augmented-on-ended");var getVoltage=require("./lib/get-voltage");module.exports=function(context,parameters){var playingNodes=[];parameters=parameters||{};parameters.tone=typeof parameters.tone==="number"?parameters.tone:64;parameters.snappy=typeof parameters.snappy==="number"?parameters.snappy:64;var noiseBuffer=NoiseBuffer(1);return function(){var masterHighBump=context.createBiquadFilter();masterHighBump.frequency.value=4e3;masterHighBump.gain.value=6;masterHighBump.type="peaking";var masterLowBump=context.createBiquadFilter();masterLowBump.frequency.value=200;masterLowBump.gain.value=12;masterLowBump.type="peaking";masterHighBump.connect(masterLowBump);var masterBus=context.createGain();masterBus.gain.value=.4;masterBus.connect(masterHighBump);var noiseHighpass=context.createBiquadFilter();noiseHighpass.type="highpass";noiseHighpass.frequency.value=1200;noiseHighpass.connect(masterBus);var oscsHighpass=context.createBiquadFilter();oscsHighpass.type="highpass";oscsHighpass.frequency.value=400;oscsHighpass.connect(masterBus);var audioNode=context.createGain();var noise=context.createBufferSource();noise.buffer=noiseBuffer;noise.loop=true;var snappyGainNode=context.createGain();snappyGainNode.gain.value=1;audioNode.snappy=snappyGainNode.gain;var oscsPreChoke=context.createGain();oscsPreChoke.gain.value=0;var noisePreChoke=context.createGain();noisePreChoke.gain.value=0;var noiseGain=context.createGain();noise.connect(snappyGainNode);snappyGainNode.connect(noiseGain);noiseGain.connect(noisePreChoke);noisePreChoke.connect(noiseHighpass);var oscsGain=context.createGain();oscsGain.connect(oscsPreChoke);oscsPreChoke.connect(oscsHighpass);var voltage=getVoltage(context);var detuneGainNode=context.createGain();detuneGainNode.gain.value=0;audioNode.detune=detuneGainNode.gain;voltage.connect(detuneGainNode);var postChoke=context.createGain();postChoke.gain.value=0;var oscs=[87.307,329.628].map(function(frequency){var osc=context.createOscillator();osc.frequency.value=frequency;detuneGainNode.connect(osc.detune);return osc});var toneNode=context.createGain();toneNode.gain.value=.5;voltage.connect(toneNode);audioNode.tone=toneNode.gain;var oscAGainNode=context.createGain();var oscBGainNode=context.createGain();oscAGainNode.gain.value=-1;oscBGainNode.gain.value=0;oscs[0].connect(oscAGainNode);oscs[1].connect(oscBGainNode);toneNode.connect(oscAGainNode.gain);toneNode.connect(oscBGainNode.gain);oscAGainNode.connect(oscsGain);oscBGainNode.connect(oscsGain);masterLowBump.connect(postChoke);postChoke.connect(audioNode);augmentedOnEnded(noise,function(){masterLowBump.disconnect(postChoke)});audioNode.duration=.3;audioNode.start=function(when){oscsPreChoke.gain.setValueAtTime(0,when+1e-4);oscsPreChoke.gain.linearRampToValueAtTime(1,when+2e-4);noisePreChoke.gain.setValueAtTime(0,when+1e-4);noisePreChoke.gain.linearRampToValueAtTime(1,when+2e-4);postChoke.gain.setValueAtTime(0,when+1e-4);postChoke.gain.linearRampToValueAtTime(1,when+2e-4);while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(audioNode);if(typeof when!=="number"){when=context.currentTime}noiseGain.gain.setValueAtTime(1e-4,when);noiseGain.gain.exponentialRampToValueAtTime(Math.max(1e-4,1),when+Math.min(audioNode.duration*(.01/.3),.01));noiseGain.gain.exponentialRampToValueAtTime(1e-4,when+audioNode.duration);oscsGain.gain.setValueAtTime(1e-4,when);oscsGain.gain.exponentialRampToValueAtTime(1,when+Math.min(.01,audioNode.duration*(.01/.3)));oscsGain.gain.exponentialRampToValueAtTime(1e-5,when+audioNode.duration*2/3);oscs.forEach(function(osc){osc.start(when);osc.stop(when+audioNode.duration)});noise.start(when);noise.stop(when+audioNode.duration);voltage.start(when);voltage.stop(when+audioNode.duration)};audioNode.stop=function(when){oscsPreChoke.gain.setValueAtTime(1,when);oscsPreChoke.gain.linearRampToValueAtTime(0,when+1e-4);noisePreChoke.gain.setValueAtTime(1,when);noisePreChoke.gain.linearRampToValueAtTime(0,when+1e-4);postChoke.gain.setValueAtTime(1,when);postChoke.gain.linearRampToValueAtTime(0,when+1e-4);audioNode.stop=function(){};audioNode.gain.setValueAtTime(1,when);audioNode.gain.linearRampToValueAtTime(0,when+.01);try{oscs.forEach(function(osc){osc.stop(when+.01)});noise.stop(when+.01);voltage.stop(when+.01)}catch(e){}};return audioNode}}},{"./lib/augmented-on-ended":14,"./lib/get-voltage":15,"noise-buffer":16}],14:[function(require,module,exports){module.exports=function augmentedOnEnded(triggerNode,fn){var context=triggerNode.context;if(context instanceof(window.OfflineAudioContext||window.webkitOfflineAudioContext)){context.suspend().then(function(){fn();context.resume()})}else if(context instanceof(window.AudioContext||window.webkitAudioContext)){triggerNode.onended=fn}}},{}],15:[function(require,module,exports){module.exports=function getVoltage(context){var buffer=context.createBuffer(1,2,44100);var data=buffer.getChannelData(0);data[0]=1;data[1]=1;var source=context.createBufferSource();source.buffer=buffer;source.loop=true;return source}},{}],16:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3}],17:[function(require,module,exports){module.exports=function(context,frequency){var playingNodes=[];return function(options){options=options||{};var osc=context.createOscillator();var gain=context.createGain();var choke=context.createGain();gain.duration=.5;gain.frequency=frequency||options.frequency||125;osc.connect(choke);choke.connect(gain);gain.start=function(when){while(playingNodes.length){playingNodes.pop().stop(when)}playingNodes.push(gain);osc.frequency.setValueAtTime(gain.frequency*1,when);osc.frequency.exponentialRampToValueAtTime(gain.frequency,when+.05);gain.gain.setValueAtTime(0,when);gain.gain.linearRampToValueAtTime(1,when+5e-4);gain.gain.exponentialRampToValueAtTime(.001,when+gain.duration);osc.start(when);osc.stop(when+gain.duration);osc.onended=function(){osc.disconnect(choke)}};gain.stop=function(when){choke.gain.setValueAtTime(1,when);choke.gain.linearRampToValueAtTime(0,when+.01)};return gain}}},{}]},{},[1]);